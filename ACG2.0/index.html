<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACG Intelligence - OpenAI Video Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap');
        
        :root {
            --acg-emerald: #10a37f;
            --acg-dark: #050506;
            --acg-glass: rgba(13, 13, 15, 0.7);
            --acg-border: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--acg-dark);
            color: #e2e8f0;
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(16, 163, 127, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(16, 163, 127, 0.05) 0%, transparent 50%);
            background-attachment: fixed;
            min-height: 100vh;
        }

        .font-mono { font-family: 'JetBrains Mono', monospace; }

        .glass-panel {
            background: var(--acg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--acg-border);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .gradient-text {
            background: linear-gradient(135deg, #10a37f 0%, #4ade80 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .acg-btn {
            background: linear-gradient(135deg, #10a37f 0%, #059669 100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .acg-btn::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }

        .acg-btn:hover::after { left: 100%; }
        
        .acg-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(16, 163, 127, 0.4);
        }

        .step-active {
            border-bottom: 2px solid var(--acg-emerald);
            color: var(--acg-emerald);
        }

        .loader-neural {
            width: 60px;
            height: 60px;
            border: 3px solid transparent;
            border-radius: 50%;
            border-top: 3px solid var(--acg-emerald);
            border-right: 3px solid var(--acg-emerald);
            animation: spin 1s cubic-bezier(0.5, 0.1, 0.4, 0.9) infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--acg-dark); }
        ::-webkit-scrollbar-thumb { background: #1a1a1e; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--acg-emerald); }
    </style>
</head>
<body class="selection:bg-emerald-500/30">

    <!-- Loading Overlay System -->
    <div id="loadingOverlay" class="fixed inset-0 z-[100] bg-black/95 backdrop-blur-2xl hidden flex-col items-center justify-center">
        <div class="relative">
            <div class="loader-neural mb-8"></div>
            <div class="absolute inset-0 flex items-center justify-center">
                <i class="fas fa-brain text-emerald-500 text-sm animate-pulse"></i>
            </div>
        </div>
        <h2 class="text-xl font-bold tracking-widest text-white mb-2 uppercase" id="loadingTitle">Neural Syncing</h2>
        <p id="loadingMsg" class="text-emerald-500/40 font-mono text-[10px] uppercase tracking-[0.5em]">Establishing API Connection...</p>
    </div>

    <!-- Smart Navigation -->
    <nav class="sticky top-0 z-50 border-b border-white/5 bg-black/40 backdrop-blur-md px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-4 group cursor-pointer">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-800 flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform">
                    <i class="fas fa-atom text-white"></i>
                </div>
                <div>
                    <h1 class="font-extrabold text-lg tracking-tighter uppercase">ACG <span class="text-emerald-500">Intelligence</span></h1>
                    <p class="text-[8px] font-mono text-neutral-500 tracking-[0.3em]">VERSION 4.0 // OPENAI API</p>
                </div>
            </div>

            <div id="navSteps" class="hidden md:flex items-center gap-8">
                <!-- Navigation steps injected by JS -->
            </div>
            
            <div class="flex items-center gap-4">
                <div class="h-8 w-[1px] bg-white/10"></div>
                <div id="apiIndicator" class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                    <span class="text-[9px] font-mono text-neutral-400 uppercase tracking-widest">API Status: Online</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-12">
        
        <!-- STEP 1: NEURAL INPUT -->
        <section id="step1" class="max-w-4xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-700">
            <div class="text-center mb-16">
                <span class="inline-block px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[9px] font-bold uppercase tracking-[0.3em] mb-4">
                    Advanced Content Generation Engine
                </span>
                <h2 class="text-5xl md:text-7xl font-black tracking-tighter leading-none mb-6">
                    Mulai Evolusi <br><span class="gradient-text italic">Konten Video Anda.</span>
                </h2>
                <p class="text-neutral-500 text-lg max-w-xl mx-auto">Sistem cerdas yang mengonversi ide mentah menjadi naskah produksi siap tayang menggunakan algoritma OpenAI.</p>
            </div>

            <div class="glass-panel p-8 md:p-12 rounded-[2.5rem] space-y-8">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="space-y-3">
                        <label class="text-[10px] font-bold uppercase tracking-widest text-neutral-500 ml-2">Processing Engine</label>
                        <div class="relative">
                            <select id="modelSelection" class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-emerald-500 transition-all text-sm appearance-none">
                                <option value="gpt-4-turbo">GPT-4 Turbo (Precision)</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 (Speed)</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-5 top-1/2 -translate-y-1/2 text-neutral-600 pointer-events-none"></i>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <label class="text-[10px] font-bold uppercase tracking-widest text-neutral-500 ml-2">Target Language</label>
                        <div class="relative">
                            <select id="language" class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-emerald-500 transition-all text-sm appearance-none">
                                <option value="id-ID">Bahasa Indonesia</option>
                                <option value="en-US">English (US)</option>
                                <option value="ja-JP">Japanese (Nihongo)</option>
                            </select>
                            <i class="fas fa-chevron-down absolute right-5 top-1/2 -translate-y-1/2 text-neutral-600 pointer-events-none"></i>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    <label class="text-[10px] font-bold uppercase tracking-widest text-neutral-500 ml-2 flex justify-between">
                        <span>Video Concept / Brief</span>
                        <span id="charCount" class="font-mono opacity-40">0 / 1000</span>
                    </label>
                    <textarea id="topic" maxlength="1000" oninput="updateCharCount()" class="w-full h-40 bg-white/5 border border-white/10 p-6 rounded-[2rem] outline-none focus:border-emerald-500 text-lg font-medium resize-none placeholder:text-neutral-700 transition-all" placeholder="Masukkan ide konten atau topik video Anda di sini..."></textarea>
                </div>

                <button id="btnStep1" onclick="handleStep1()" class="w-full py-6 acg-btn text-white font-bold uppercase tracking-[0.2em] rounded-2xl flex items-center justify-center gap-3 text-xs">
                    <i class="fas fa-microchip"></i> Initialize Intelligence Process
                </button>
            </div>
        </section>

        <!-- STEP 2: STRATEGIC TITLES -->
        <section id="step2" class="hidden max-w-5xl mx-auto">
            <div class="flex items-center justify-between mb-10">
                <h2 class="text-3xl font-black tracking-tighter uppercase italic">Neural <span class="text-emerald-500">Optimization</span></h2>
                <span class="text-[10px] font-mono text-neutral-500 uppercase">Select winning title</span>
            </div>
            <div id="titlesList" class="grid gap-4"></div>
        </section>

        <!-- STEP 3: PSYCHOLOGICAL HOOKS -->
        <section id="step3" class="hidden max-w-5xl mx-auto">
            <h2 class="text-3xl font-black tracking-tighter mb-10 uppercase italic">Retention <span class="text-emerald-500">Hooks</span></h2>
            <div id="hooksList" class="grid md:grid-cols-3 gap-6"></div>
        </section>

        <!-- STEP 4: MASTER SCRIPT -->
        <section id="step4" class="hidden max-w-7xl mx-auto">
            <div class="grid lg:grid-cols-12 gap-8">
                <div class="lg:col-span-4 space-y-6">
                    <h2 class="text-3xl font-black tracking-tighter uppercase italic leading-none">Script <br>Architect</h2>
                    <div class="glass-panel p-8 rounded-[2rem] space-y-6 border-l-4 border-l-emerald-500">
                        <p class="text-xs text-neutral-400 leading-relaxed font-mono">Naskah dihasilkan menggunakan struktur retensi tinggi yang dioptimasi untuk algoritma media sosial modern.</p>
                        <div class="flex flex-col gap-3">
                            <button onclick="handleStep4()" class="w-full py-4 acg-btn text-white font-bold uppercase text-[10px] tracking-widest rounded-xl">Lanjutkan Produksi</button>
                            <button onclick="regenerateScript()" class="w-full py-4 bg-white/5 hover:bg-white/10 text-neutral-400 font-bold uppercase text-[10px] tracking-widest rounded-xl border border-white/5 transition-colors">Regenerasi Naskah</button>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-8">
                    <div class="relative group">
                        <div class="absolute -inset-1 bg-gradient-to-r from-emerald-500/20 to-blue-500/20 rounded-[2.5rem] blur opacity-25 group-hover:opacity-50 transition duration-1000"></div>
                        <textarea id="scriptArea" class="relative w-full h-[600px] glass-panel p-10 rounded-[2.5rem] outline-none font-mono text-sm leading-loose text-neutral-300 focus:border-emerald-500 resize-none"></textarea>
                    </div>
                </div>
            </div>
        </section>

        <!-- STEP 5: VISUAL PREVIEW -->
        <section id="step5" class="hidden max-w-7xl mx-auto text-center">
            <div class="max-w-3xl mx-auto space-y-10">
                <h2 class="text-5xl font-black tracking-tighter uppercase italic">Ready to <span class="text-emerald-500">Launch</span></h2>
                <div class="glass-panel aspect-video rounded-[3rem] overflow-hidden relative group border-2 border-white/5 bg-neutral-900 shadow-2xl">
                    <div id="previewCanvas" class="absolute inset-0 bg-cover bg-center transition-transform duration-1000 group-hover:scale-110" style="background-image: url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1964&auto=format&fit=crop');"></div>
                    <div class="absolute inset-0 bg-black/60 backdrop-blur-[2px] flex items-center justify-center">
                        <div class="text-center p-8">
                            <div class="w-16 h-16 rounded-full bg-emerald-500/20 border border-emerald-500/40 flex items-center justify-center mx-auto mb-6">
                                <i class="fas fa-play text-emerald-400"></i>
                            </div>
                            <h3 id="previewTitle" class="text-2xl font-bold text-white mb-2">---</h3>
                            <p class="text-xs text-neutral-400 font-mono uppercase tracking-[0.3em]">AI Synthesis Ready</p>
                        </div>
                    </div>
                </div>
                <button onclick="finalizeProject()" class="w-full py-7 acg-btn text-white font-black uppercase tracking-[0.3em] rounded-[2rem] text-lg shadow-2xl">
                    Deploy Project <i class="fas fa-paper-plane ml-2"></i>
                </button>
            </div>
        </section>

        <!-- STEP 6: DATA STATION -->
        <section id="step6" class="hidden max-w-7xl mx-auto animate-in zoom-in-95 duration-500">
            <div class="flex flex-col lg:flex-row justify-between items-end mb-12 gap-8">
                <div>
                    <span class="text-emerald-500 font-mono text-[10px] uppercase tracking-[0.4em]">Success Notification</span>
                    <h2 class="text-5xl font-black tracking-tighter mt-2 uppercase italic leading-none">Output <span class="text-white/10">Vault</span></h2>
                </div>
                <div class="flex gap-4">
                    <button onclick="downloadProject()" class="acg-btn px-8 py-4 rounded-2xl text-white font-bold uppercase text-[10px] tracking-widest flex items-center gap-3">
                        <i class="fas fa-file-export"></i> Export Data
                    </button>
                    <button onclick="location.reload()" class="bg-white/5 hover:bg-white/10 border border-white/10 px-8 py-4 rounded-2xl text-neutral-400 font-bold uppercase text-[10px] tracking-widest transition-all">
                        New Project
                    </button>
                </div>
            </div>

            <div class="grid lg:grid-cols-12 gap-8">
                <div class="lg:col-span-8">
                    <div class="glass-panel rounded-[2.5rem] p-10 space-y-6 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-8 opacity-5">
                            <i class="fas fa-quote-right text-9xl"></i>
                        </div>
                        <div class="flex items-center gap-5">
                            <div class="w-14 h-14 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-xl text-emerald-500">
                                <i class="fas fa-scroll"></i>
                            </div>
                            <div>
                                <h3 id="finalTitle" class="text-2xl font-black text-white">---</h3>
                                <p class="text-[9px] font-mono text-neutral-500 uppercase tracking-widest">Master Production Script</p>
                            </div>
                        </div>
                        <hr class="border-white/5">
                        <div id="finalScriptDisplay" class="text-neutral-400 leading-relaxed font-mono text-sm max-h-[500px] overflow-y-auto pr-6 custom-scroll whitespace-pre-wrap italic">
                            <!-- Injected Script -->
                        </div>
                    </div>
                </div>
                
                <div class="lg:col-span-4 space-y-6">
                    <div class="glass-panel p-8 rounded-[2rem]">
                        <h3 class="text-[10px] font-black uppercase text-neutral-500 mb-6 tracking-widest flex items-center gap-2">
                            <i class="fas fa-info-circle text-emerald-500"></i> Engine Artifacts
                        </h3>
                        <div id="metaContent" class="space-y-4 font-mono text-[10px] text-neutral-400">
                        </div>
                    </div>
                    <div class="glass-panel p-8 rounded-[2rem] bg-emerald-500/[0.02]">
                        <h3 class="text-[10px] font-black uppercase text-emerald-500 mb-6 tracking-widest flex items-center gap-2">
                            <i class="fas fa-bullhorn"></i> Distribution Copy
                        </h3>
                        <div id="copyContent" class="space-y-5">
                            <!-- Injected Captions -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        /**
         * ACG INTELLIGENCE ENGINE V4.0
         * Ported & Adopted from Antonobekasi/ACG Logic
         */
        const apiKey = ""; 
        
        let currentStep = 1;
        let project = {
            engine: "OpenAI GPT-4 Omni",
            logic: "ACG Framework 4.0",
            language: "id-ID",
            topic: "",
            title: "",
            hook: "",
            script: "",
            captions: []
        };

        const steps = [
            { id: 1, name: "Neural Input", icon: "brain" },
            { id: 2, name: "Strategic Titles", icon: "heading" },
            { id: 3, name: "Retention Hooks", icon: "anchor" },
            { id: 4, name: "Production Script", icon: "align-left" },
            { id: 5, name: "Pre-Flight", icon: "eye" },
            { id: 6, name: "Data Vault", icon: "rocket" }
        ];

        function init() {
            renderStepper();
        }

        function renderStepper() {
            const container = document.getElementById('navSteps');
            if (!container) return;
            
            container.classList.remove('hidden');
            container.classList.add('flex');
            
            container.innerHTML = steps.map(s => `
                <div class="flex items-center gap-2">
                    <button onclick="goToStep(${s.id})" 
                            class="text-[9px] font-bold uppercase transition-all flex items-center gap-2 px-2 py-1 rounded
                                   ${currentStep === s.id ? 'text-emerald-500' : (currentStep > s.id ? 'text-neutral-400' : 'text-neutral-700')}"
                            ${currentStep < s.id ? 'disabled' : ''}>
                        <span class="w-5 h-5 rounded-md border flex items-center justify-center ${currentStep === s.id ? 'border-emerald-500/50 bg-emerald-500/10' : 'border-neutral-800'}">
                            ${s.id}
                        </span>
                        ${s.name}
                    </button>
                    ${s.id < steps.length ? '<span class="text-neutral-800">/</span>' : ''}
                </div>
            `).join('');
        }

        function updateCharCount() {
            const topic = document.getElementById('topic').value;
            document.getElementById('charCount').innerText = `${topic.length} / 1000`;
        }

        function goToStep(s) {
            if (s > 1 && !project.topic) return;
            
            document.querySelectorAll('section').forEach(el => el.classList.add('hidden'));
            const target = document.getElementById(`step${s}`);
            if (target) target.classList.remove('hidden');
            
            currentStep = s;
            renderStepper();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showLoading(show, title = "", msg = "") {
            const overlay = document.getElementById('loadingOverlay');
            if (title) document.getElementById('loadingTitle').innerText = title;
            if (msg) document.getElementById('loadingMsg').innerText = msg;
            overlay.style.display = show ? 'flex' : 'none';
        }

        async function aiCall(prompt, system, isJson = true) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const body = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: system }] },
                generationConfig: isJson ? { responseMimeType: "application/json" } : {}
            };
            
            let retries = 5;
            let delay = 1000;
            
            while(retries >= 0) {
                try {
                    const res = await fetch(url, { method: 'POST', body: JSON.stringify(body) });
                    const data = await res.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    
                    if (isJson) {
                        return JSON.parse(text.replace(/```json/g, "").replace(/```/g, "").trim());
                    }
                    return text;
                } catch(e) {
                    if (retries === 0) throw e;
                    retries--;
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
        }

        async function handleStep1() {
            const topic = document.getElementById('topic').value.trim();
            if(!topic) return;

            project.topic = topic;
            project.language = document.getElementById('language').value;
            
            showLoading(true, "Neural Analysis", "Deconstructing concept using ACG logic...");
            
            try {
                const res = await aiCall(
                    `Topic: ${topic}, Lang: ${project.language}`,
                    "Generate 5 high-CTR titles for a video. Return JSON: { \"titles\": [{ \"text\": string, \"score\": number, \"category\": string }] }"
                );

                document.getElementById('titlesList').innerHTML = res.titles.map(t => `
                    <div onclick="handleStep2('${t.text.replace(/'/g, "\\'")}')" class="glass-panel p-6 rounded-2xl cursor-pointer hover:border-emerald-500/50 transition-all flex justify-between items-center group">
                        <div class="flex items-center gap-5">
                            <div class="text-xs font-mono text-emerald-500 opacity-40">${t.score}%</div>
                            <h3 class="text-lg font-bold text-white group-hover:text-emerald-400 transition-colors">${t.text}</h3>
                        </div>
                        <span class="text-[9px] font-mono text-neutral-600 uppercase border border-white/5 px-2 py-1 rounded">${t.category}</span>
                    </div>
                `).join('');
                
                goToStep(2);
            } catch(e) {
                console.error(e);
            } finally {
                showLoading(false);
            }
        }

        async function handleStep2(title) {
            project.title = title;
            showLoading(true, "Hook Synthesis", "Crafting psychological entry points...");
            
            try {
                const res = await aiCall(
                    `Title: ${title}`,
                    "Generate 3 powerful hooks based on retention psychology. Return JSON: { \"hooks\": [{ \"text\": string, \"trigger\": string }] }"
                );

                document.getElementById('hooksList').innerHTML = res.hooks.map(h => `
                    <div onclick="handleStep3('${h.text.replace(/'/g, "\\'")}')" class="glass-panel p-8 rounded-[2rem] cursor-pointer hover:bg-emerald-500/5 transition-all group flex flex-col justify-between">
                        <p class="text-white font-semibold leading-relaxed mb-6 group-hover:text-emerald-400 transition-colors italic">"${h.text}"</p>
                        <div class="text-[8px] font-mono text-neutral-600 uppercase tracking-widest bg-black/40 p-2 rounded-lg border border-white/5">Trigger: ${h.trigger}</div>
                    </div>
                `).join('');
                
                goToStep(3);
            } catch(e) {
                console.error(e);
            } finally {
                showLoading(false);
            }
        }

        async function handleStep3(hook) {
            project.hook = hook;
            showLoading(true, "NLE Scripting", "Generating full narrative structure...");
            
            try {
                const res = await aiCall(
                    `Title: ${project.title}, Hook: ${hook}, Lang: ${project.language}`,
                    "Write a professional video script. Use ACG efficient logic. Include visual cues like [Visual: ...]. Return JSON: { \"script\": string }"
                );

                document.getElementById('scriptArea').value = res.script;
                goToStep(4);
            } catch(e) {
                console.error(e);
            } finally {
                showLoading(false);
            }
        }

        function handleStep4() {
            project.script = document.getElementById('scriptArea').value;
            document.getElementById('previewTitle').innerText = project.title;
            goToStep(5);
        }

        async function finalizeProject() {
            showLoading(true, "Deploying", "Compiling artifacts for data vault...");
            
            try {
                const res = await aiCall(
                    `Video Title: ${project.title}`,
                    "Generate 3 social media captions (IG, TikTok, YouTube). Return JSON: { \"captions\": [{ \"platform\": string, \"content\": string }] }"
                );
                
                project.captions = res.captions;
                
                document.getElementById('finalTitle').innerText = project.title;
                document.getElementById('finalScriptDisplay').innerText = project.script;
                
                document.getElementById('metaContent').innerHTML = `
                    <div class="flex justify-between border-b border-white/5 pb-2"><span>Engine:</span><span class="text-emerald-500">ACG-V4</span></div>
                    <div class="flex justify-between border-b border-white/5 pb-2"><span>API:</span><span class="text-white">OpenAI Connect</span></div>
                    <div class="flex justify-between border-b border-white/5 pb-2"><span>Language:</span><span class="text-white uppercase">${project.language}</span></div>
                    <div class="flex justify-between"><span>Timestamp:</span><span class="text-neutral-600 italic">${new Date().toLocaleTimeString()}</span></div>
                `;

                document.getElementById('copyContent').innerHTML = res.captions.map(c => `
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-[8px] font-bold text-white/40 uppercase tracking-widest">${c.platform}</span>
                            <button onclick="copyText(\`${c.content.replace(/`/g, "\\`")}\`)" class="text-[7px] bg-emerald-500/10 text-emerald-400 px-2 py-1 rounded hover:bg-emerald-500/20 transition-colors uppercase">Copy</button>
                        </div>
                        <p class="text-[10px] font-mono text-neutral-400 bg-black/20 p-3 rounded-xl border border-white/5 leading-relaxed">${c.content}</p>
                    </div>
                `).join('');

                goToStep(6);
            } catch(e) {
                console.error(e);
            } finally {
                showLoading(false);
            }
        }

        function copyText(text) {
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }

        function downloadProject() {
            const blob = new Blob([JSON.stringify(project, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ACG_PROJECT_${Date.now()}.json`;
            a.click();
        }

        window.onload = init;
    </script>
</body>
</html>
